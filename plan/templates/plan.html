{% extends "base.html" %}
{% block body %}


<div class="ui segment right floated noborder">
<span class="ui orange right ribbon label">Prototype</span>
</div>

<h1 class="ui header">
  <i class="settings icon"></i>
  <div class="content">
    Générateur de plan
    <div class="sub header">5K, 10K, semi et Marathon.</div>
  </div>
</h1>


<div class="ui message">
  <div class="header">
    Mode d'emploi
  </div>
<p>Cette page vous permet de générer un plan d'entraînement
pour la plupart des distances de compétition route.
Vous pouvez modifier les paramètres ci-dessous pour 
re-génerer le plan.
N'oubliez pas de régler votre vma sur la <a href="/">page d'accueil</a>
</div>
</p>

<form class="ui form"
      id="planOptions"
      onsubmit="return false;"
      action="" method="post">
  <div class="field">
    <label>Course</label>
    <select class="ui search dropdown" id="race">
        <option value="7">5 km</option>
        <option value="6">10 km</option>
        <option value="5">Semi-marathon</option>
        <option value="4">Marathon</option>
    </select>
  </div>
  <div class="field">
    <label>Nombre de semaines</label>
    <select class="ui search dropdown" id="weeks">
        <option value="8">8</option>
        <option value="10">10</option>
        <option value="12">12</option>
    </select>
  </div>
  <div class="field">
    <label>Nombre de séances par semaine</label>
    <select class="ui search dropdown" id="spw">
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
    </select>
  </div>
  <div class="field">
    <label>Intensité</label>
    <select class="ui search dropdown" id="level">
        <option value="1">Facile</option>
        <option value="2">Normale</option>
        <option value="3">Difficile</option>
    </select>
  </div>
</form>

<div class="ui divider"></div>

<h2 class="ui header" id="planTitle">Plan d'entraînement</h2>

<div id="plan">
</div>
{% endblock %}


{% block script %}
<script src="/static/jquery.datatables.js" type="text/javascript"></script>
<script src="/static/plan.js" type="text/javascript"></script>
<script language="javascript">

function generate() {
  var race = $("#race").children("option:selected").val();
  var weeks = $("#weeks").children("option:selected").val();
  var spw = $("#spw").children("option:selected").val();
  var level = $("#level").children("option:selected").val();
  setCookie('race', race);
  setCookie('weeks', weeks);
  setCookie('spw', spw);
  setCookie('level', level);
  fillTable(race, weeks, spw, level);
}

$(document).ready(function(){
    $("#race").change(function(){
        generate();
    });

    $("#weeks").change(function(){
        generate();
    });

    $("#spw").change(function(){
        generate();
    });

    $("#level").change(function(){
        generate();
    });

   var race = getCookie('race') || 6;
   $("#race").val(race);
   var weeks = getCookie('weeks') || 8;
   $("#weeks").val(weeks);
   var spw = getCookie('spw') || 5;
   $("#spw").val(spw);
   var level = getCookie('level') || 1;
   $("#level").val(level);

   generate();
});

</script>
{% endblock %}

